<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Useless Multiplayer Game</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h1>Useless Multiplayer Game</h1>
  <label>Bet: <span id="betVal">5</span></label>
  <input type="range" min="1" max="10" value="5" id="betSlider">
  <p>Timer: <span id="timer">10</span></p>
  <h2>Players</h2>
  <ul id="players"></ul>
  <h2>Last round</h2>
  <pre id="roundResult"></pre>

  <script>
    const socket = io();
    const roomId = 'room1';
    const name = 'Player_' + Math.floor(Math.random()*1000);

    socket.emit('joinRoom', { roomId, name });

    const slider = document.getElementById('betSlider');
    const betVal = document.getElementById('betVal');
    slider.addEventListener('input', () => {
      betVal.textContent = slider.value;
      socket.emit('setBet', { roomId, bet: parseInt(slider.value) });
    });

    socket.on('timer', time => {
      document.getElementById('timer').textContent = time;
    });

    socket.on('playersUpdate', players => {
      const ul = document.getElementById('players');
      ul.innerHTML = '';
      for (const [id, p] of Object.entries(players)) {
        const li = document.createElement('li');
        li.textContent = `${p.name}: $${p.balance} (bet: ${p.currentBet})`;
        ul.appendChild(li);
      }
    });

    socket.on('roundResult', data => {
      document.getElementById('roundResult').textContent =
        `Loser: ${data.loser}\n` +
        JSON.stringify(data.players, null, 2);
    });
  </script>
</body>
</html>
